\\x0ba9b693da6b2dbb83cee744e953ac5cb5f3d2cb93a4a0550b607a7fdcca02c2	.{{= name }} {\n}
\\x0d6e4079e36703ebd37c00722f5891d28b0e2811dc114b129215123adcce3605	main
\\x0e29bae4258b410a236a911d4a1d58df1a133d1664a32a22aceb4e6b4a36b6ad	.{{= name }}.insync {\n    display:none;\n    color: #777;\n    background-color: #ccc;\n}\n\n.{{= name }} button.download {\n    display: none;\n}\n\n.{{= name }} button.upload {\n    display: none;\n}
\\x1ac3049098a6283bee27c5b8be30e2595dab7aac80823e0f921e71a066a1652c	remote_summary_commits_diff
\\x1dad82e4d884e053919a2b3658ef7f29ef2f363d9987b8166c46ed7e445c2e1d	var w = $("#"+id);\n\nvar remotes = endpoint.schema('bundle').table('remote_database').rows();\nwidget.sync(remotes, w.find('.remotes'), function( remote ) {\n    return widget('b:remote_summary', { remote: remote });\n});\n\n\n
\\x1e901fe6a8349ac0bef7ac8fbfb4bf7dedf8f8b86032f762389c62e19cb25eee	<html>\n    <head>\n        <title>Bundle Admin</title>\n        <script src='/system.js'></script>\n        <script>\n            System.import( '/widget.js' ).then( function( widget ) {\n                var db = new AQ.Database( '/endpoint/0.1', { evented: 'no' } );\n                window.endpoint = db;\n\n                // some commonly used bundles\n                AQ.Widget.import( 'org.aquameta.core.ide', 'ide', endpoint );\n                AQ.Widget.import( 'org.aquameta.core.bundle', 'b', endpoint );\n                AQ.Widget.import( 'org.aquameta.ui.admin', 'admin', endpoint );\n                AQ.Widget.import( 'org.aquameta.ui.layout', 'layout', endpoint );\n                $('body').append( widget( 'b:main' ) );\n\n                // add the on-screen debugger\n                $('body').append( widget( 'ide:debugger3_manager' ) );\n\n            }).catch( function( e ) {\n                console.log( 'System.js error:', e );\n            });\n         </script>\n    </head>\n    <body></body>\n</html>
\\x240f7ccf1d34a934711fe87e50c98124ea0f55cfbfcee5f1c84f50d0664af8a0	c5dd2f81-bff4-45b6-af76-4222e89b0944
\\x2ca29ba84d0e5f5bac93cd66981d75f95621e50c166f99078bc7e0727e5267c4	remote_summary
\\x316fb703991cb80f7e686df7d91b04b3fc4c42cba735ce20910f73f9b6f76b05	<html>\n    <head>\n        <title>Bundle Admin</title>\n        <script src='/system.js'></script>\n        <script>\n            System.import( '/widget.js' ).then( function( widget ) {\n                var db = new AQ.Database( '/endpoint/0.2', { evented: 'no' } );\n                window.endpoint = db;\n\n                // some commonly used bundles\n                AQ.Widget.import( 'org.aquameta.core.ide', 'ide', endpoint );\n                AQ.Widget.import( 'org.aquameta.ui.bundle', 'b', endpoint );\n                AQ.Widget.import( 'org.aquameta.ui.admin', 'admin', endpoint );\n                AQ.Widget.import( 'org.aquameta.ui.layout', 'layout', endpoint );\n                $('body').append( widget( 'b:main' ) );\n\n                // add the on-screen debugger\n                $('body').append( widget( 'ide:debugger3_manager' ) );\n\n            }).catch( function( e ) {\n                console.log( 'System.js error:', e );\n            });\n         </script>\n    </head>\n    <body></body>\n</html>
\\x3181a8f0138537faec680bc531f2c8699317650deace7b4ffb8eb566434b7ff5	<html>\n    <head>\n        <title>Bundle Admin</title>\n        <script src='/system.js'></script>\n        <script>\n            System.import( '/widget.js' ).then( function( widget ) {\n                var db = new AQ.Database( '/endpoint/0.1', { evented: 'no' } );\n                window.endpoint = db;\n\n                // some commonly used bundles\n                AQ.Widget.import( 'org.aquameta.core.ide', 'ide', endpoint );\n                AQ.Widget.import( 'org.aquameta.core.bundle', 'b', endpoint );\n                $('body').append( widget( 'b:main' ) );\n\n                // add the on-screen debugger\n                $('body').append( widget( 'ide:debugger3_manager' ) );\n\n            }).catch( function( e ) {\n                console.log( 'System.js error:', e );\n            });\n         </script>\n    </head>\n    <body></body>\n</html>
\\x3c5c55202f99b11b51a926f83ce4100caf6c60befd0cc8ab3b061b57791b8eb8	be77388a-8b31-4f94-91e6-7bbae5d32e28
\\x4134f00f840820a52d7b8fd73da0574c99d01928367610576c3894b23397023a	<div id="{{= id }}" class="{{= name }}">\n    DIFFERENT\n</div>
\\x4938388f0c68650a2120ab03dfbf8e39b08edca0d086b3c3fd02e84e501a5fab	var w = $("#"+id);
\\x4bff6709718104e8d18e762d5dbdff7187a9e7a14f718668eb1263c1752acfef	var w = $("#"+id);\n\nvar remotes = {\n    label: 'Remotes',\n    content: function() {\n        return widget('admin:table_edit', {\n            rowset: endpoint.schema('bundle').table('remote_database').rows({ limit: 20 }),\n            item_name: function(row) {\n                return row.get('foreign_server_name');\n            }\n        })\n    }\n}\n\nvar manager = {\n    label: 'Manager',\n    content: function() {\n        return widget('b:remotes', {} );\n    }\n}\n\nw.find('.content').html(widget('layout:tabs', {\n    tabs: [\n        { label: manager.label,  content: manager.content },\n        { label: remotes.label,  content: remotes.content }\n    ],\n    selected_tab_color: '#ccc'\n}));\n\n\n\n
\\x4d1ae64124cc0c67e937b7104763f091659e738a435158b4545b0d40395b8813	<div id="{{= id }}" class="{{= name }}">\n    <h1>bundle admin</h1>\n    \n    <div class='content'>\n    </div>\n</div>
\\x50397bda150aad1260281cd0d2a4120fecd367e263109233674b859a05ce654a	var w = $("#"+id);\n\nvar bundle_diff = endpoint.schema('bundle').function('remote_diff', [\n    'bundle',\n    remote.get('schema_name')\n]);\n\nwidget.sync(bundle_diff, w.find('.diff'), function(diff_row) {\n    return widget('b:remote_summary_diff_row', {\n        diff_row: diff_row,\n        remote_schema_name: remote.get('schema_name')\n    });\n});\n
\\x5875e763dc0c4f02c3b2af8e292fdd66159d98d6e0fb6c14da65311673cd98fb	var w = $("#"+id);\n\nconsole.log('DIFFERENT.');\n\nfor (var i=0;i<commits.length;i++) {\n    w.append(widget('commit_plus', { commit: commits[i] }));\n}\n\n
\\x59024db4225fdd5aee8a109c2d847b498e51f68e67e397358de533d235c785de	commit_plus
\\x5adfaa1f283c61930b7b536e4c5ab8d9ebff8a2001ceadd4dff9cd603e33ed2d	<div id="{{= id }}" class="{{= name }}">\n    <h2>{{= remote.get('schema_name') }}</h2>\n    \n    <p><input type='checkbox' class='show_synced' />Show Synchronized Bundles</p>\n    \n    <table class='diff'>\n        <tr>\n            <th>local</th>\n            <th>remote</th>\n        </tr>\n    </table>\n</div>
\\x5c30bef0bcf59cfde9d7835c11c24a45fdcdc73fb3b145da75d314e3a5e7f55f	remotes
\\x5d2e0c4af4201b2fef066a9918fcc8b4e8fedbfa3fa208dd99aa530523ac85f3	<span id="{{= id }}" class="{{= name }}">\n    <a href='#' title="{{= commit.message }}">+</a>\n</span>
\\x6179ef3af17f5be3dc4ee620972f37525f2b5f15849917090bd0bee32d423010	var w = $("#"+id);\n\n// remote has, local doesn't\nif (diff_row.get('b1_id') == null) {\n    w.find('.remote').show();\n    w.find('.remote').append(diff_row.get('b2_name'));\n    w.find('button.clone').show();\n}\n// local has, remote doesn't\nelse {\n    w.find('.local').show();\n    w.find('.local').append(diff_row.get('b1_name'));\n    w.find('button.push').show();\n}\n\n\nw.find('button.clone').click(function() {\n    console.log(diff_row);\n\n    endpoint.schema('bundle').function('remote_clone', [\n\t\tdiff_row.get('b2_id'),\n        remote_schema_name,\n        'bundle'\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\n\n\nw.find('button.push').click(function() {\n    console.log(diff_row);\n\n    endpoint.schema('bundle').function('remote_clone', [\n\t\tdiff_row.get('b1_id'),\n        'bundle',\n        remote_schema_name\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});
\\x62edc167195d95c4c62c9eba4cf6466eba95ecbfb62e05176f34d08faca58ce1	/org.aquameta.ui.bundlemanager/README.txt
\\x6528ae4bc88382e87fa1caf77a08777dffd461c33ad26fce675590fd8a7676e3	var w = $("#"+id);\n\nconsole.log('DIFFERENT.');\n\nfor (var i=0;i<commits.length;i++) {\n    w.append('+');\n}\n\n
\\x6a2fd7408826743ad3de97ac84f44bcb2234c295a0ec90b87822bcc9d689bf2e	var w = $("#"+id);\n\nvar remotes = {\n    label: 'Remotes',\n    content: function() {\n        return widget('admin:table_edit', {\n            rowset: endpoint.schema('bundle').table('remote_database').rows({ limit: 20 }),\n            item_name: function(row) {\n                return row.get('foreign_server_name');\n            }\n        })\n    }\n}\n\nvar manager = {\n    label: 'Manager',\n    content: function() {\n        return widget('b:manager', {} );\n    }\n}\n\nw.find('.content').html(widget('layout:tabs', {\n    tabs: [\n        { label: manager.label,  content: manager.content },\n        { label: remotes.label,  content: remotes.content }\n    ],\n    selected_tab_color: '#ccc'\n}));\n\n
\\x6a7ac99584b292266003f6326b9fec842a28d84c515298108184e42c6d348e09	<div id="{{= id }}" class="{{= name }}">\n    <h1>bundle admin</h1>\n\n    <h2>remotes</h2>\n\n    <div class='remotes'>\n    </div>\n</div>
\\x6b072931f15672c51c033230aac648d7944399c5cbebb7a72314c03f309bde4e	var w = $("#"+id);\n\n/*\n// local\nvar schema_id = new AQ.Schema('bundle');\nvar bundle_id = new AQ.Relation(schema_id, 'bundle');\n\n// remote\nvar schema2_id = new AQ.Schema(remote.get('schema_name'));\nvar bundle2_id = new AQ.Relation(schema2_id, 'bundle');\n\nconsole.log(bundle_id);\n\nvar bundle_diff = endpoint.schema('bundle').function('remote_diff', {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, [\n    { schema_id: 'bundle', name: 'bundle' },\n    { schema_id: remote.get('schema_name'), name: 'bundle' }\n]);\n*/\n\n\nendpoint.schema('bundle').function({\n    name: 'diff_bundle_bundle_commits',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    bundle_table_a: { schema_id: { name: 'bundle'}, name: 'bundle' },\n    bundle_table_b: { schema_id: { name: remote.get('schema_name')}, name: 'bundle' }\n}).then(function(remote_diff) {\n    widget.sync(remote_diff, w.find('.diff'), function(diff_row) {\n        // console.log(diff_row);\n        return widget('b:remote_summary_diff_row', {\n            diff_row: diff_row,\n            remote_schema_name: remote.get('schema_name'),\n            local_schema_name: 'bundle'\n        });\n    });\n});\n\nw.find('input.show_synced').change(function() {\n    console.log('togglin');\n    if ($(this).prop('checked')) {\n        w.find('.insync').show();\n    } else {\n        w.find('.insync').hide();\n    }\n \n});\n\n\n\n
\\x6ee4a469cd4e91053847f5d3fcb61dbcc91e8f0ef10be7748da4c4a1ba382d17	manager
\\x8db56738161e66a9cb4689107e2a3bbf1ebf5a54a6b6c0aab86a80df4a346878	cd5ba0c0-06a2-4440-95b7-5eed98ca5685
\\x8e4c25650510f45da597191a051a62dfb7e9e1db86c7706d86fa2327bfbe4e30	remote_summary_diff_row
\\xa69d3d40c495fb28d9f008be72cf47de948481d470633e2b76456c02611e0edc	b647a3bf-0940-46d3-b017-fd74cf9f7e9a
\\xa786f2b42434a84609c0468424a783970a3242555bbf0967ffe5e3cd50f74e40	var w = $("#"+id);\n\nconsole.log('DIFF_ROW', diff_row);\n\n\n\n
\\xa88a1076f9fc9eb25e6d473ce266a5058cb27e04002d2e86191a728e9c8e317e	var w = $("#"+id);\n\nvar remotes = {\n    label: 'Remotes',\n    content: function() {\n        return widget('admin:table_edit', {\n            rowset: endpoint.schema('bundle').table('remote_database').rows({ limit: 20 }),\n            item_name: function(row) {\n                return row.get('foreign_server_name');\n            }\n        })\n    }\n}\n\nvar manager = {\n    label: 'Manager',\n    content: function() {\n        return widget('b:remotes', {} );\n    }\n}\n\nw.find('.content').html(widget('layout:tabs', {\n    tabs: [\n        { label: manager.label,  content: manager.content },\n        { label: remotes.label,  content: remotes.content }\n    ],\n    selected_tab_color: '#ccc'\n}));\n\n
\\xa8ae5aa90a94d908fc7ab35b18702a301e9378f83386f49d4b1dc63c0502a34f	<div id="{{= id }}" class="{{= name }}">\n</div>
\\xaf1658cd1800682a4b42d120218e9ae51f31e85a8c6343e20e6d6724a5b633dd	b30974da-2153-4ab6-8d60-53a988ff9c11
\\xaf2773f9bd5829a946f1c9d63516a60c9e71e7024435409b92c452facf24bc6f	.{{= name }} {\n}\n\n.{{= name }} button.clone {\n    display: none;\n}\n\n.{{= name }} button.push {\n    display: none;\n}
\\xb2d6917253992e56c03cd0138a5b105d718480d43fbe59500b84d4ae83c41e02	/bundlemanager
\\xb5bea41b6c623f7c09f1bf24dcae58ebab3c0cdd90ad966bc43a45b44867e12b	true
\\xb87a30aa6b33e9bea6a7b54065c3450ee369c7ddf27be50438314f5db9e6d8cd	e39887ff-496a-470b-81a5-2c2c1e99d842
\\xbb41f5950f4a77a1b728e3a9cddf0ee31889d9bf8b0bbfe351ff9463c6a0f997	7d4a1efa-439e-4689-a314-fcefeb5e8720
\\xbc3aae12a1a5e544662a3ff5223ca22b5a46061ece8752cc589ab31ab5294f24	.{{= name }} a {\n    color: green;\n}
\\xc3fd6f9444e113eff41e7799fa01fed872b1013617996ad27810018474ba8c9f	<tr id="{{= id }}" class="{{= name }}">\n    <td class='local'>\n        <button class='download'>download</button>\n    </td>\n    \n    <td class='remote'>\n        <button class='upload'>upload</button>\n    </td>\n    <td class='diff'>\n    </td>\n</tr>
\\xcb295ecfb9300e4432ab9ab0fd4a84f7c3e4a8d57a18fcfc5f51d76fa6427674	var w = $("#"+id);\n\n/*\n// local\nvar schema_id = new AQ.Schema('bundle');\nvar bundle_id = new AQ.Relation(schema_id, 'bundle');\n\n// remote\nvar schema2_id = new AQ.Schema(remote.get('schema_name'));\nvar bundle2_id = new AQ.Relation(schema2_id, 'bundle');\n\nconsole.log(bundle_id);\n\nvar bundle_diff = endpoint.schema('bundle').function('remote_diff', {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, [\n    { schema_id: 'bundle', name: 'bundle' },\n    { schema_id: remote.get('schema_name'), name: 'bundle' }\n]);\n*/\n\n\nendpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    local: { schema_id: { name: 'bundle'}, name: 'bundle' },\n    remote: { schema_id: { name: remote.get('schema_name')}, name: 'bundle' }\n}).then(function(remote_diff) {\n    widget.sync(remote_diff, w.find('.diff'), function(diff_row) {\n        console.log(diff_row);\n        return widget('b:remote_summary_diff_row', {\n            diff_row: diff_row,\n            remote_schema_name: remote.get('schema_name')\n        });\n    });\n});\n\n\n\n
\\xcbaa3ca28f33c45c05a82878120a7ef6ad6b65d6001e3af816acbc6184dbe383	var w = $("#"+id);\n\n// remote has, local doesn't\nif (diff_row.get('a_bundle_id') == null) {\n\n    w.find('.remote')\n    .show()\n    .html(diff_row.get('b_name'));\n\n    w.find('button.download').show();\n}\n// local has bundle, remote doesn't\nelse if (diff_row.get('b_bundle_id') == null) {\n\n    w.find('.local')\n    .show()\n    .html(diff_row.get('a_name'));\n\n    w.find('button.upload').show();\n} // remote has bundle, local doesn't\nelse {\n    w.find('.local').html(diff_row.get('a_name'));\n    w.find('.remote').html(diff_row.get('b_name'));\n\n    // FIXME\n\n    var a_commits = diff_row.get('a_commits');\n    var b_commits = diff_row.get('b_commits');\n\n\n    // search b_commits for commits not in a_commits\n    var a_commits_diff = Array();\n    var a_in_sync = true;\n    for (var i=0;i<a_commits.length;i++) {\n        var commit = a_commits[i];\n        var present = false;\n        for (var j=0;j<b_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == b_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            a_commits_diff.push(commit);\n            a_in_sync = false;\n        }\n    }\n\n    // search b_commits for commits not in a_commits\n    var b_commits_diff = Array();\n    var b_in_sync = true;\n    for (var i=0;i<b_commits.length;i++) {\n        var commit = b_commits[i];\n        var present = false;\n        for (var j=0;j<a_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == a_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            b_commits_diff.push(commit);\n            b_in_sync = false;\n        }\n    }\n\n    console.log('DONE: ', a_commits_diff, b_commits_diff);\n\n    if (!a_in_sync) {\n        w.find('.remote').append('++++');\n    }\n    if (!b_in_sync) {\n        w.find('.local').append('++++');\n    }\n\n\n\n    /*\n        w.find('.diff').append(widget('remote_summary_commits_diff', {\n            diff_row: diff_row,\n            local_schema_name: local_schema_name,\n            remote_schema_name: remote_schema_name\n        }));\n    } else {\n\t    console.log('a,b:',a_commits,b_commits);\n        w.find('.diff').html('fully in-sync');\n\t    w.addClass('insync');\n    }\n    */\n}\n\nw.find('button.download').click(function() {\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('remote_id'),\n        remote_schema_name,\n        'bundle'\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\nw.find('button.upload').click(function() {\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('local_id'),\n        'bundle',\n        remote_schema_name\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\n
\\xccb1a9b0a5cbd99ab62de7cb3527942e4ef3508edfec85258bee49e7b68a468d	<tr id="{{= id }}" class="{{= name }}">\n    <td class='local'>\n        <button class='clone'>clone</button>\n    </td>\n    \n    <td class='remote'>\n        <button class='push'>push</button>\n    </td>\n</tr>
\\xcd2f6373a78f42179172060a402624a5e1aa7fc5eb436deee3ac2a9ad41cee8a	<tr id="{{= id }}" class="{{= name }}">\n    <td class='local'>\n        <button class='download'>download</button>\n    </td>\n    \n    <td class='remote'>\n        <button class='upload'>upload</button>\n    </td>\n</tr>
\\xd13e65479151d1c5e693c55807dc8ed1541dc5a2a1d13ff79cfc83378a993edb	var w = $("#"+id);\n\n// remote has, local doesn't\nif (diff_row.get('a_bundle_id') == null) {\n\n    w.find('.remote')\n    .show()\n    .html(diff_row.get('b_name'));\n\n    w.find('button.download').show();\n}\n// local has bundle, remote doesn't\nelse if (diff_row.get('b_bundle_id') == null) {\n\n    w.find('.local')\n    .show()\n    .html(diff_row.get('a_name'));\n\n    w.find('button.upload').show();\n} // remote has bundle, local doesn't\nelse {\n    w.find('.local').html(diff_row.get('a_name'));\n    w.find('.remote').html(diff_row.get('b_name'));\n\n    // FIXME\n\n    var a_commits = diff_row.get('a_commits');\n    var b_commits = diff_row.get('b_commits');\n\n\n    // search b_commits for commits not in a_commits\n    var a_commits_diff = Array();\n    var a_in_sync = true;\n    for (var i=0;i<a_commits.length;i++) {\n        var commit = a_commits[i];\n        var present = false;\n        for (var j=0;j<b_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == b_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            a_commits_diff.push(commit);\n            a_in_sync = false;\n        }\n    }\n\n    // search b_commits for commits not in a_commits\n    var b_commits_diff = Array();\n    var b_in_sync = true;\n    for (var i=0;i<b_commits.length;i++) {\n        var commit = b_commits[i];\n        var present = false;\n        for (var j=0;j<a_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == a_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            b_commits_diff.push(commit);\n            b_in_sync = false;\n        }\n    }\n    \n    if (a_in_sync && b_in_sync) {\n\t    w.addClass('insync');\n        // w.find('.diff').html('fully in-sync');\n    } else {\n\n        if (!a_in_sync) {\n            w.find('.local').append(widget('remote_summary_commits_diff', {\n                commits: a_commits_diff \n            }));\n        }\n        if (!b_in_sync) {\n            w.find('.remote').append(widget('remote_summary_commits_diff', {\n                commits: b_commits_diff \n            }));\n        }\n    }\n}\n\nw.find('button.download').click(function() {\n    console.log(diff_row, remote_schema_name);\n    window.diff_row = diff_row;\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('b_bundle_id'),\n        remote_schema_name,\n        'bundle'\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\nw.find('button.upload').click(function() {\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('a_bundle_id'),\n        'bundle',\n        remote_schema_name\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\n
\\xd1652b270c9a65148bf220ae1f360c69478a3fe32695b0c357b9eb3c0b64a7d9	<div id="{{= id }}" class="{{= name }}">\n    <h2>{{= remote.get('schema_name') }}</h2>\n    \n    <p><input type='checkbox' class='show_synced' />Show Synchronized Bundles</p>\n    \n    <table class='diff'>\n        <tr>\n            <th>local</th>\n            <th>remote</th>\n            <th>diff</th>\n        </tr>\n    </table>\n</div>
\\xd2bd926e2dd8a9c6391f9f39982e6cfab14dad4137bb934cfebce686533147d7	.{{= name }} {\n    border: 2px dotted;\n}
\\xd3b62f1de7de4bac61ab34022de95ad991b3893a7659c1e8db51914dce9a557e	c23a1049-71fc-47e9-aaa8-7269b3ad7ae7
\\xd686cb8a497120d5d8770744c5f38a2d5fac24e2c46ce2a45b29c5a87cf578f0	<div id="{{= id }}" class="{{= name }}">\n    <h3>{{= remote.get('schema_name') }}</h3>\n    <table class='diff'>\n        <tr>\n            <th>local difference</th>\n            <th>remote difference</th>\n        </tr>\n    </table>\n</div>
\\xdd2741e2734916143a6dbf1d1939cbc04396f10356faf54aba282066cec41b5f	944b5a05-be70-45a1-a549-1301d38799e4
\\xdda4c4590b7cd1e39fcb39f9d251fbd2c3f38a9f1da5513ed7f8209a168afa6a	.{{= name }}.insync {\n    display:none;\n}\n\n.{{= name }} button.download {\n    display: none;\n}\n\n.{{= name }} button.upload {\n    display: none;\n}
\\xe32b97f0e7e96250cedf71ffd07807a9496b89e48c2f6f3363447e324bdda7cf	var w = $("#"+id);\n\n/*\n// local\nvar schema_id = new AQ.Schema('bundle');\nvar bundle_id = new AQ.Relation(schema_id, 'bundle');\n\n// remote\nvar schema2_id = new AQ.Schema(remote.get('schema_name'));\nvar bundle2_id = new AQ.Relation(schema2_id, 'bundle');\n\nconsole.log(bundle_id);\n\nvar bundle_diff = endpoint.schema('bundle').function('remote_diff', {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    local: { schema_id: 'bundle', name: 'bundle' },\n    remote: { schema_id: remote.get('schema_name'), name: 'bundle' }\n});\n\nvar bundle_diff = endpoint.schema('bundle').function({\n    name: 'remote_diff',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, [\n    { schema_id: 'bundle', name: 'bundle' },\n    { schema_id: remote.get('schema_name'), name: 'bundle' }\n]);\n*/\n\n\nendpoint.schema('bundle').function({\n    name: 'diff_bundle_bundle_commits',\n    parameters: ['meta.relation_id', 'meta.relation_id']\n}, {\n    bundle_table_a: { schema_id: { name: 'bundle'}, name: 'bundle' },\n    bundle_table_b: { schema_id: { name: remote.get('schema_name')}, name: 'bundle' }\n}).then(function(remote_diff) {\n    widget.sync(remote_diff, w.find('.diff'), function(diff_row) {\n        // console.log(diff_row);\n        return widget('b:remote_summary_diff_row', {\n            diff_row: diff_row,\n            remote_schema_name: remote.get('schema_name'),\n            local_schema_name: 'bundle'\n        });\n    });\n});\n\nw.find('input.show_synced').change(function() {\n    if ($(this).prop('checked')) {\n        w.find('.insync').show();\n    } else {\n        w.find('.insync').hide();\n    }\n \n});\n\n\n\n
\\xe3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855	
\\xe4b08665b2511bc86ca7cf1116f4a4df34ec5c7f0a19329e166cd8a00e862382	return {};
\\xf13bbad0d674b460ef96e81f31ed8395ca698bcc32db72a64df47f7e9a0944a9	<div id="{{= id }}" class="{{= name }}">\n    \n</div>
\\xf7e22132be0a764e28659dc975c55d4b8e0baf63d53285dc357ac1c5898c2c86	var w = $("#"+id);\n\n// remote has, local doesn't\nif (diff_row.get('a_bundle_id') == null) {\n\n    w.find('.remote')\n    .show()\n    .html(diff_row.get('b_name'));\n\n    w.find('button.download').show();\n}\n// local has bundle, remote doesn't\nelse if (diff_row.get('b_bundle_id') == null) {\n\n    w.find('.local')\n    .show()\n    .html(diff_row.get('a_name'));\n\n    w.find('button.upload').show();\n} // remote has bundle, local doesn't\nelse {\n    w.find('.local').html(diff_row.get('a_name'));\n    w.find('.remote').html(diff_row.get('b_name'));\n\n    // FIXME\n\n    var a_commits = diff_row.get('a_commits');\n    var b_commits = diff_row.get('b_commits');\n\n\n    // search b_commits for commits not in a_commits\n    var a_commits_diff = Array();\n    var a_in_sync = true;\n    for (var i=0;i<a_commits.length;i++) {\n        var commit = a_commits[i];\n        var present = false;\n        for (var j=0;j<b_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == b_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            a_commits_diff.push(commit);\n            a_in_sync = false;\n        }\n    }\n\n    // search b_commits for commits not in a_commits\n    var b_commits_diff = Array();\n    var b_in_sync = true;\n    for (var i=0;i<b_commits.length;i++) {\n        var commit = b_commits[i];\n        var present = false;\n        for (var j=0;j<a_commits.length;j++) {\n            // console.log('comparing', commit, b_commits[j]);\n            if (commit.id == a_commits[j].id) {\n                present = true;\n            }\n        }\n        if (!present) {\n            b_commits_diff.push(commit);\n            b_in_sync = false;\n        }\n    }\n    \n    if (a_in_sync && b_in_sync) {\n\t    w.addClass('insync');\n        // w.find('.diff').html('fully in-sync');\n    } else {\n\n        if (!a_in_sync) {\n            w.find('.local').append(widget('remote_summary_commits_diff', {\n                commits: a_commits_diff \n            }));\n        }\n        if (!b_in_sync) {\n            w.find('.remote').append(widget('remote_summary_commits_diff', {\n                commits: b_commits_diff \n            }));\n        }\n    }\n}\n\nw.find('button.download').click(function() {\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('remote_id'),\n        remote_schema_name,\n        'bundle'\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\nw.find('button.upload').click(function() {\n    endpoint.schema('bundle').function('remote_clone', [\n        diff_row.get('local_id'),\n        'bundle',\n        remote_schema_name\n    ]).then(function() {\n        alert('ok');\n    }).catch(function(e,o) {\n        alert('error');\n        console.log('ERROR',e,o);\n    });\n});\n\n
\\xfaa2a6c9a478652c1105d8d0daaa6b2d98e9917ec70a8c0bc78fc1fc8a08810f	var w = $("#"+id);\n\nvar remotes = endpoint.schema('bundle').table('remote_database').rows();\nwidget.sync(remotes, w, function( remote ) {\n    return widget('b:remote_summary', { remote: remote });\n});
\\xfc5b311fe0e99b74cd26c23514429f2588e6369072cac2f52f506e73421cf6b1	.{{= name }} {\n    color: green;\n}
\\xfcf3a4a7b9b08e845469f287024f5365e6f5e3d667efad128af8f5e54373f104	<div id="{{= id }}" class="{{= name }}">\n    <h2>{{= remote.get('schema_name') }}</h2>\n    <table class='diff'>\n        <tr>\n            <th>local difference</th>\n            <th>remote difference</th>\n        </tr>\n    </table>\n</div>
\\xff92d638873c290b9de588277d3210e8cd8c9e8a0a76310bf4f6ae7c067dce09	<span id="{{= id }}" class="{{= name }}">\n    \n</span>
